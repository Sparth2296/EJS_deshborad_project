<!-- Products Page Body -->
<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header Section -->
        <div class="mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">Our Products</h1>
            <p class="text-gray-600">Discover our amazing collection</p>
        </div>

        <!-- Filter and Sort Section -->
        <div class="bg-white rounded-lg shadow-sm p-4 mb-8 flex flex-wrap gap-4 items-center justify-between">
            <div class="flex flex-wrap gap-3">
                <select class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option>All Categories</option>
                    <option>Electronics</option>
                    <option>Fashion</option>
                    <option>Home & Garden</option>
                </select>
                
                <select class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option>Sort by: Featured</option>
                    <option>Price: Low to High</option>
                    <option>Price: High to Low</option>
                    <option>Rating: High to Low</option>
                    <option>Newest First</option>
                </select>
            </div>
            
            <div class="text-gray-600">
                <span class="font-semibold"><%= products.length %></span> Products Found
            </div>
        </div>

        <!-- Products Grid -->
        <% if (products && products.length > 0) { %>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <% products.forEach(product => { %>
                    <div class="bg-white rounded-xl shadow-md hover:shadow-2xl transition-all duration-300 overflow-hidden group">
                        <!-- Product Image -->
                        <div class="relative overflow-hidden aspect-square">
                            <img 
                                src="<%= product.product_image.url %>" 
                                alt="<%= product.product_name %>"
                                class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                            />
                            
                            <!-- Discount Badge -->
                            <% if (product.discount > 0) { %>
                                <div class="absolute top-3 right-3 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold">
                                    -<%= product.discount %>%
                                </div>
                            <% } %>
                            
                            <!-- Rating Badge -->
                            <div class="absolute top-3 left-3 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-lg flex items-center gap-1">
                                <svg class="w-4 h-4 text-yellow-400 fill-current" viewBox="0 0 20 20">
                                    <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                                </svg>
                                <span class="text-sm font-semibold text-gray-700"><%= product.rating %></span>
                            </div>
                        </div>

                        <!-- Product Info -->
                        <div class="p-5">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-2 min-h-[3.5rem]">
                                <%= product.product_name %>
                            </h3>
                            
                            <p class="text-gray-600 text-sm mb-4 line-clamp-2">
                                <%= product.sort_description %>
                            </p>

                            <!-- Color Options -->
                            <% if (product.color && product.color.length > 0) { %>
                                <div class="flex gap-2 mb-4">
                                    <% product.color.slice(0, 5).forEach(color => { %>
                                        <div 
                                            class="w-6 h-6 rounded-full border-2 border-gray-300 hover:border-gray-600 transition-colors cursor-pointer"
                                            style="background-color: <%= color %>"
                                            title="<%= color %>"
                                        ></div>
                                    <% }) %>
                                    <% if (product.color.length > 5) { %>
                                        <span class="text-xs text-gray-500 self-center">+<%= product.color.length - 5 %></span>
                                    <% } %>
                                </div>
                            <% } %>

                            <!-- Price Section -->
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <% if (product.discount > 0) { %>
                                        <div class="flex items-center gap-2">
                                            <span class="text-2xl font-bold text-gray-900">
                                                $<%= (product.price * (1 - product.discount / 100)).toFixed(2) %>
                                            </span>
                                            <span class="text-sm text-gray-500 line-through">
                                                $<%= product.price.toFixed(2) %>
                                            </span>
                                        </div>
                                    <% } else { %>
                                        <span class="text-2xl font-bold text-gray-900">
                                            $<%= product.price.toFixed(2) %>
                                        </span>
                                    <% } %>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="flex gap-2">
                                <a 
                                    href="/product/<%= product._id %>" 
                                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white text-center py-2.5 rounded-lg font-medium transition-colors"
                                >
                                    View Details
                                </a>
                                <button class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2.5 rounded-lg transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                <% }) %>
            </div>
        <% } else { %>
            <!-- Empty State -->
            <div class="text-center py-16">
                <svg class="w-24 h-24 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                </svg>
                <h3 class="text-2xl font-semibold text-gray-900 mb-2">No Products Found</h3>
                <p class="text-gray-600">Check back later for new arrivals!</p>
            </div>
        <% } %>

        <!-- Pagination -->
        <div class="mt-12 flex justify-center">
            <div class="flex gap-2">
                <button class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                    Previous
                </button>
                <button class="px-4 py-2 bg-blue-600 text-white rounded-lg">1</button>
                <button class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">2</button>
                <button class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">3</button>
                <button class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                    Next
                </button>
            </div>
        </div>
    </div>
</div>